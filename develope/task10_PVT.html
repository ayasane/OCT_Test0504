<!DOCTYPE html>
<html>
<head>
    <script src="src/jspsych-6.1.0/jspsych.js"></script>
    <script src="src/jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="src/jspsych-6.1.0/plugins/jspsych-fullscreen.js"></script>
    <script src="src/jspsych-6.1.0/plugins/smura-psychomotor-vigilance.js"></script>
    <link rel="stylesheet" href="src/jspsych-6.1.0/css/jspsych.css"></link>
</head>

<body>
    <script type="text/javascript">

      /* 課題に関するコードを以下に書く */
      var fullscreen = {
        type: 'fullscreen',
        message: '<p>以下のボタンをクリックすると，画面は全画面表示に切り替わります。全画面表示を止めたい場合はEscキーを押してください。</p>',
        button_label: "全画面表示に切り替え",
        fullscreen_mode: true
      };

      var display_time = function () {
          var rand = Math.round(Math.random() * 1000) + 2000;
          console.log("[smura-pvt-interval] interval duration: " + rand);
          return rand;
      };

      var interval = {
        type: "html-keyboard-response",
        stimulus: '<div style="position:absolute; top:20%; left:50%; transform:translateX(-50%); -webkit-transform:translateX(-50%); -ms-transform:translateX(-50%);"><img src="img/task10_PVT/rectangle.png" width="300px"/></div>',
        choices: jsPsych.NO_KEYS,
        trial_duration: display_time
      }

      var countup = {
        type: "psychomotor-vigilance",
        image: "img/task10_PVT/rectangle.png",
        max_countup: 1000,
        repeat: 1,
        choices: ["space"],
        prompt: "スペースキーを押してカウントアップを止めてください。",
      }

      var thread = {
        timeline: [interval, countup],
        repetitions: 5
      }

      /* タイムラインの設定 */
      var timeline = [];
      //timeline.push(fullscreen);
      timeline.push(thread);

      /* 課題開始 */
      jsPsych.init({
        timeline: timeline,
        //on_finish: function() {
        //  jsPsych.data.displayData();
        //}
      });
      
    </script>
</body>
</html>

